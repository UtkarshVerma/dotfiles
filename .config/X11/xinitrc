#!/bin/sh

if [ -d /etc/X11/xinit/xinitrc.d ] ; then
    for f in /etc/X11/xinit/xinitrc.d/?*.sh ; do
        [ -x "$f" ] && . "$f"
    done
    unset f
fi

setwall -q -n -t tokyonight 

# mpd is started by default by systemd
autostart="\
    /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
    picom
    mpd --no-daemon
    unclutter
    parcellite -n
    safeeyes
    asus-fan-daemon
    nm-applet
    $STATUSBAR"

echo "$autostart" | while read -r program; do
    process="${program%%[[:space:]]*}"
    process="${process##*/}"
    pidof -s "$process" || $program >"/tmp/$process.log" 2>&1 &
done

exec dwm >/tmp/dwm.log 2>&1
