source = ~/.config/hypr/colors.conf

# Globals
$mod = SUPER

# Monitors --------------------------------------------------------------------
# Room
monitor = desc:Najin CEC Panda FPD Technology CO. ltd 0x0036, 1920x1080@120.03, 0x0, 1
monitor = desc:Samsung Electric Company SAMSUNG, 1920x1080@59.94, -1920x0, 1

# EWI
monitor = desc:Najin CEC Panda FPD Technology CO. ltd 0x0036, 1920x1080@120.03, 0x0, 1
monitor = desc:Dell Inc. DELL P2422H 5428QP3, 1920x1080@60.0, -1920x-700, 1

# Fallback to defaults.
monitor = , preferred, auto, 1

# Autostart -------------------------------------------------------------------
exec-once = hyprpm reload -nn
exec-once = waybar
exec-once = ghostty --gtk-single-instance=true --initial-window=false # Use this instead of systemd service to inherit env vars.
exec-once = musicup
exec-once = systemctl --user start hyprpolkitagent
exec-once = hyprpaper
exec-once = hypridle
exec-once = hyprctl setcursor vimix $XCURSOR_SIZE
exec-once = while [ ! -S $XDG_RUNTIME_DIR/hypr/$HYPRLAND_INSTANCE_SIGNATURE/.hyprpaper.sock ]; do sleep 0.1; done; rswal --variables no-reload=1
exec-once = wl-paste --type text --watch cliphist store  # Store only text
exec-once = wl-paste --type image --watch cliphist store # Store only images
exec-once = breaks
# exec-once = nm-applet

# Look and feel ---------------------------------------------------------------
# https://wiki.hyprland.org/Configuring/Variables/#general
general {
    gaps_in = 5
    gaps_out = 15, 20, 20, 20
    border_size = 1

    col.active_border = $color4
    col.inactive_border = $background

    layout = master
}

# https://wiki.hyprland.org/0.41.2/Configuring/Variables/#cursor
cursor {
    inactive_timeout = 5
}

# https://wiki.hyprland.org/Configuring/Variables/#decoration
decoration {
    blur {
        enabled = true
    }
}

# https://wiki.hypr.land/Configuring/Window-Rules/#layer-rules
layerrule = blur, waybar

# https://wiki.hyprland.org/Configuring/Variables/#animations
animations {
    enabled = false
}

# https://wiki.hyprland.org/Configuring/Variables/#misc
misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    focus_on_activate = true

    mouse_move_enables_dpms = true
    key_press_enables_dpms = true

    enable_swallow = true
    swallow_regex = ^(com.mitchellh.ghostty|foot|alacritty|st)$
    swallow_exception_regex = ^(wev)$
}

# https://wiki.hyprland.org/Configuring/Master-Layout/#config
master {
    new_status = master
}

# https://wiki.hyprland.org/Configuring/Variables/#input
input {
    kb_options = caps:escape    # Use caps as escape.

    touchpad {
        natural_scroll = true
    }
}

device {
    name = elan1200:00-04f3:30ba-touchpad
    sensitivity = +0.25
}

# https://wiki.hyprland.org/Configuring/Variables/#binds
binds {
    allow_workspace_cycles = true
}

# https://github.com/Duckonaut/split-monitor-workspaces?tab=readme-ov-file#usage
plugin {
    split-monitor-workspaces {
        count = 5
        keep_focused = 1
        enable_notification = 0
        enable_persistent_workspaces = 1
        enable_wrapping = false
    }
}

# Gestures --------------------------------------------------------------------
# https://wiki.hypr.land/Configuring/Gestures/
gesture = 3, horizontal, workspace # Workspace swipe.

# Keymaps ---------------------------------------------------------------------
# https://wiki.hyprland.org/Configuring/Binds/
bind = $mod, Return, exec, terminal
bind = $mod SHIFT, Q, killactive,
bind = $mod, Escape, exec, sysact
bind = $mod SHIFT, SPACE, togglefloating,
bind = $mod, D, exec, menu-run
bind = $mod, E, exec, terminal -e $FILE_MANAGER
bind = $mod SHIFT, D, exec, passmenu
bind = $mod SHIFT, E, exec, terminal -e $SYSTEM_MONITOR
bind = $mod SHIFT, W, exec, terminal -e nmtui

bind = $mod, F, fullscreen, 2
bind = $mod SHIFT, F, fullscreen, 0

bind = $mod, Apostrophe, split-workspace, e+1
bind = $mod, Semicolon, split-workspace, e-1
bind = $mod, Tab, workspace, previous_per_monitor

bind = $mod, W, exec, $BROWSER
bind = $mod, T, exec, timers
bind = $mod, P, exec, sysprofile --cpu
bind = $mod SHIFT, P, exec, sysprofile --gpu
bind = $mod, Slash, exec, emoji-menu
bind = $mod SHIFT, Slash, exec, emoji-menu -c
bind = $mod, C, exec, rofi-calc
bind = $mod, S, exec, snip sel file
bind = $mod SHIFT, S, exec, snip sel clip
bind = $mod CONTROL, S, exec, XDG_CURRENT_DESKTOP=GNOME flameshot gui
bind = $mod SHIFT, R, exec, screenrecord
bind = $mod, M, exec, mountmate
bind = $mod SHIFT, M, exec, mountmate -u

bind = $mod, J, layoutmsg, cyclenext
bind = $mod SHIFT, j, layoutmsg, swapnext
bind = $mod, K, layoutmsg, cycleprev
bind = $mod SHIFT, k, layoutmsg, swapprev
binde = $mod, H, layoutmsg, mfact -0.02
binde = $mod, L, layoutmsg, mfact +0.02
bind = $mod, SPACE, layoutmsg, swapwithmaster
bind = $mod, I, layoutmsg, addmaster
bind = $mod SHIFT, I, layoutmsg, removemaster

bind = , XF86TouchpadToggle, exec, toggle-touchpad # TODO:
binde = , XF86MonBrightnessDown, exec,  brightnessctl -q set 5%-
binde = , XF86MonBrightnessUp, exec,  brightnessctl -q set +5%
binde = $mod CONTROL, Down, exec,  brightnessctl -q set 5%-
binde = $mod CONTROL, Up, exec,  brightnessctl -q set +5%

bind = $mod, F4, exec, terminal -e wiremix
bind = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle; pkill -RTMIN+8 $STATUSBAR
binde = , XF86AudioRaiseVolume, exec, wpctl set-volume --limit=1.0 @DEFAULT_AUDIO_SINK@ 3%+; pkill -RTMIN+8 $STATUSBAR
binde = , XF86AudioLowerVolume, exec, wpctl set-volume --limit=1.0 @DEFAULT_AUDIO_SINK@ 3%-; pkill -RTMIN+8 $STATUSBAR
bind = , XF86AudioMicMute, exec, toggle-mic

# Switch workspaces with mod + [0-9].
bind = $mod, 1, split-workspace, 1
bind = $mod, 2, split-workspace, 2
bind = $mod, 3, split-workspace, 3
bind = $mod, 4, split-workspace, 4
bind = $mod, 5, split-workspace, 5

# Cycle workspaces. Window moving must use (+/-)1 instead of next/prev for
# enable_wrapping to work.
binde = $mod, BracketRight, split-cycleworkspacesnowrap, next
binde = $mod, BracketLeft, split-cycleworkspacesnowrap, prev
bind = $mod SHIFT, BracketRight, split-movetoworkspacesilent, +1
bind = $mod SHIFT, BracketLeft, split-movetoworkspacesilent, -1

# Move active window to a workspace with mod + SHIFT + [0-9].
bind = $mod SHIFT, 1, split-movetoworkspacesilent, 1
bind = $mod SHIFT, 2, split-movetoworkspacesilent, 2
bind = $mod SHIFT, 3, split-movetoworkspacesilent, 3
bind = $mod SHIFT, 4, split-movetoworkspacesilent, 4
bind = $mod SHIFT, 5, split-movetoworkspacesilent, 5

# Switch between monitors.
bind = $mod, Comma, focusmonitor, -1
bind = $mod, Period, focusmonitor, +1

# Grab rogue windows (useful after monitor disconnects).
bind = $mod SHIFT, Period, split-grabroguewindows,

# Scratchpad.
bind = $mod, Grave, togglespecialworkspace, magic
bind = $mod SHIFT, Grave, split-movetoworkspace, special:magic

# Move/resize windows with mod + LMB/RMB and dragging.
bindm = $mod, mouse:272, movewindow
bindm = $mod, mouse:273, resizewindow

# Music controls.
bind = , XF86AudioPlay, exec, musicctl toggle
bind = , XF86AudioNext, exec, musicctl next
bind = , XF86AudioPrev, exec, playerctl previous
bind = , XF86AudioStop, exec, playerctl stop
bind = $mod CTRL, L, exec, musicctl next
bind = $mod CTRL, H, exec, musicctl previous
bind = $mod CTRL, K, exec, musicctl toggle
bind = $mod CTRL SHIFT, K, exec, musicctl stop

# Misc.
bind = $mod, R, exec, pkill -USR1 redshift # TODO:

# Window rules ----------------------------------------------------------------
# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# See https://wiki.hyprland.org/Configuring/Workspace-Rules/ for workspace rules

# Example windowrule v1
# windowrule = float, ^(kitty)$

# Example windowrule v2
# windowrulev2 = float,class:^(kitty)$,title:^(kitty)$

windowrulev2 = suppressevent maximize, class:.* # You'll probably like this.

# Disable border if only one window exists.
windowrulev2 = noborder, onworkspace:w[t1]
