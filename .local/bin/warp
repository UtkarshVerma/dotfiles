#!/bin/sh

serviceStatus=$(systemctl is-active warp-svc)

case "$1" in
    on)
        if [ "$serviceStatus" != "active" ]; then
            systemctl start warp-svc
            sleep 1
        fi
        warp-cli connect
    ;;
    off)
        if [ "$serviceStatus" = "active" ]; then
            warp-cli disconnect
            systemctl stop warp-svc
        fi
    ;;
    *)
        echo "usage:\n\twarp [on|off]"
        exit 1
    ;;
esac
